<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tambah Data Pegawai</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div class="container my-5">
      <h2 class="text-center mb-4">Tambah Data Pegawai</h2>
      <form id="input-form">
        <!-- Input teks -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="nama" class="form-label">Nama</label>
            <input type="text" class="form-control" id="nama" name="nama" placeholder="Masukkan nama" required />
          </div>
          <div class="col-md-6">
            <label for="nip" class="form-label">NIP</label>
            <input type="text" class="form-control" id="nip" name="nip" placeholder="Masukkan NIP" required />
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="ttl" class="form-label">Tempat dan Tanggal Lahir</label>
            <input type="text" class="form-control" id="ttl" name="ttl" placeholder="Contoh: Bandung, 01/01/2000" />
          </div>
          <div class="col-md-6">
            <label for="golongan" class="form-label">Golongan</label>
            <select class="form-select" id="golongan" name="golongan">
              <option value="" disabled selected>Pilih golongan</option>
              <option value="II/a">II/a</option>
              <option value="II/b">II/b</option>
              <option value="III/a">III/a</option>
              <option value="III/b">III/b</option>
              <option value="IV/a">IV/a</option>
              <option value="IV/b">IV/b</option>
            </select>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="unitKerja" class="form-label">Unit Kerja</label>
            <input type="text" class="form-control" id="unitKerja" name="unitKerja" placeholder="Masukkan unit kerja" />
          </div>
        </div>

        <!-- Checkbox untuk data boolean -->
        <h5 class="mt-4">Dokumen Pendukung</h5>
        <div class="row">
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skCpns" name="skCpns" />
              <label class="form-check-label" for="skCpns">SK CPNS</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skPns" name="skPns" />
              <label class="form-check-label" for="skPns">SK PNS</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skKenaikanPangkat" name="skKenaikanPangkat" />
              <label class="form-check-label" for="skKenaikanPangkat">SK Kenaikan Pangkat</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skJabatan" name="skJabatan" />
              <label class="form-check-label" for="skJabatan">SK Jabatan</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="stpplStruktural" name="stpplStruktural" />
              <label class="form-check-label" for="stpplStruktural">STPPL (Diklat Struktural)</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="stpplTeknis" name="stpplTeknis" />
              <label class="form-check-label" for="stpplTeknis">STPPL (Diklat Teknis)</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="ijazah" name="ijazah" />
              <label class="form-check-label" for="ijazah">Ijazah Pendidikan Terakhir</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="karisKarsu" name="karisKarsu" />
              <label class="form-check-label" for="karisKarsu">Karis / Karsu</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="kartuTaspen" name="kartuTaspen" />
              <label class="form-check-label" for="kartuTaspen">Kartu Taspen</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skKonversiNip" name="skKonversiNip"/>
              <label class="form-check-label" for="skKonversiNip">SK Konversi NIP</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="kenaikanGajiBerkala" name="kenaikanGajiBerkala" />
              <label class="form-check-label" for="kenaikanGajiBerkala">Kenaikan Gaji Berkala</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="kpeKarpeg" name="kpeKarpeg"/>
              <label class="form-check-label" for="kpeKarpeg">KPE dan Karpeg</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="skMutasi" name="skMutasi" />
              <label class="form-check-label" for="skMutasi">SK Mutasi</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="satyaLencana" name="satyaLencana" />
              <label class="form-check-label" for="satyaLencana">Satya Lencana</label>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="aktaNikah" name="aktaNikah" />
              <label class="form-check-label" for="aktaNikah">Akta Nikah</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="npwp" name="npwp" />
              <label class="form-check-label" for="npwp">NPWP</label>
            </div>
          </div>
        </div>

        <!-- Input tanggal -->
        <h5 class="mt-4">Tanggal Penting</h5>
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="tanggalSkKenaikanPangkat" class="form-label">Tanggal SK Kenaikan Pangkat</label>
            <input type="date" class="form-control" id="tanggalSkKenaikanPangkat" name="tanggalSkKenaikanPangkat" />
          </div>
          <div class="col-md-6">
            <label for="tanggalKenaikanGajiBerkala" class="form-label">Tanggal Kenaikan Gaji Berkala</label>
            <input type="date" class="form-control" id="tanggalKenaikanGajiBerkala" name="tanggalKenaikanGajiBerkala" />
          </div>
        </div>

        <!-- Tombol -->
        <div class="d-flex justify-content-end mt-4">
          <button type="submit" class="btn btn-success me-2">Simpan</button>
          <a href="index.html" class="btn btn-secondary">Batal</a>
        </div>
      </form>
    </div>

    <script>
      $(document).ready(function () {
        $("#input-form").on("submit", function (e) {
          e.preventDefault();

          const data = {
            action: "insert",
            nama: $("#nama").val(),
            nip: $("#nip").val(),
            ttl: $("#ttl").val(),
            golongan: $("#golongan").val(),
            unitKerja: $("#unitKerja").val(),
            skCpns: $("#skCpns").is(":checked"),
            skPns: $("#skPns").is(":checked"),
            skKenaikanPangkat: $("#skKenaikanPangkat").is(":checked"),
            skJabatan: $("#skJabatan").is(":checked"),
            stpplStruktural: $("#stpplStruktural").is(":checked"),
            stpplTeknis: $("#stpplTeknis").is(":checked"),
            ijazah: $("#ijazah").is(":checked"),
            karisKarsu: $("#karisKarsu").is(":checked"),
            kartuTaspen: $("#kartuTaspen").is(":checked"),
            skKonversiNip: $("#skKonversiNip").is(":checked"),
            kenaikanGajiBerkala: $("#kenaikanGajiBerkala").is(":checked"),
            kpeKarpeg: $("#kpeKarpeg").is(":checked"),
            skMutasi: $("#skMutasi").is(":checked"),
            satyaLencana: $("#satyaLencana").is(":checked"),
            aktaNikah: $("#aktaNikah").is(":checked"),
            npwp: $("#npwp").is(":checked"),
            tanggalSkKenaikanPangkat: $("#tanggalSkKenaikanPangkat").val(),
            tanggalKenaikanGajiBerkala: $("#tanggalKenaikanGajiBerkala").val(),
          };

          $.ajax({
            url: "https://script.google.com/macros/s/AKfycbwvvZQiB15VLy5Uv8lE_m8rwGTQ5QzdO8OBIHZPVs0J9Fmo4Ewre9SBHxzTsg_sdrfRTg/exec",
            method: "POST",
            data: JSON.stringify(data),
            success: function (response) {
              alert(response.message || "Data berhasil disimpan!");
              window.location.href = "index.html";
            },
            error: function (error) {
              console.error("Error saving data:", error);
              alert("Terjadi kesalahan saat menyimpan data.");
            },
          });
        });
      });
    </script>
  </body>
</html>
